---
apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  creationTimestamp: null
  name: multiazdbclusters.xdatabases.crossplane.giantswarm.io
spec:
  claimNames:
    kind: MultiAzClusterClaim
    plural: multiazclusterclaims
  defaultCompositionRef:
    name: rds-cluster
  enforcedCompositionRef:
    name: rds-cluster
  group: xdatabases.crossplane.giantswarm.io
  names:
    kind: MultiAzDbCluster
    listKind: MultiAzDbClusterList
    plural: multiazdbclusters
    shortNames:
    - mzdc
    singular: multiazdbcluster
  versions:
  - name: v1alpha1
    referenceable: true
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: Defines the spec of a RDS cluster
            properties:
              activityStream:
                description: ActivityStream is the activity stream configuration.
                properties:
                  enabled:
                    description: Enabled is whether activity stream is enabled.
                    type: boolean
                  engineNativeAuditFieldsIncluded:
                    description: |-
                      EngineNativeAuditFieldsIncluded is whether engine native audit fields are
                      included. This option only applies to Oracle databases.
                    type: boolean
                  mode:
                    description: Mode is the mode of the activity stream. Valid values
                      are `sync` and `async`.
                    enum:
                    - sync
                    - async
                    type: string
                type: object
              allocatedStorage:
                description: AllocatedStorage is the size of the database.
                format: int64
                type: integer
              allowMajorVersionUpgrade:
                description: AllowMajorVersionUpgrade is whether major version upgrades
                  are allowed.
                type: boolean
              applyImmediately:
                description: ApplyImmediately is whether changes should be applied
                  immediately.
                type: boolean
              autoMinorVersionUpgrade:
                description: |-
                  AutoMinorVersionUpgrade is whether minor version upgrades are applied
                  automatically. This value can be overridden on a per instance basis.
                type: boolean
              autoscaling:
                description: Autoscaling is the autoscaling configuration.
                properties:
                  enabled:
                    description: Autoscaling is whether autoscaling is enabled.
                    type: boolean
                  maxCapacity:
                    description: MaxCapacity is the maximum capacity for autoscaling.
                    format: int64
                    type: integer
                  metricType:
                    description: MetricType is the type of metric to use for autoscaling.
                    enum:
                    - RDSReaderAverageCPUUtilization
                    - RDSReaderAverageDatabaseConnections
                    type: string
                  minCapacity:
                    description: MinCapacity is the minimum capacity for autoscaling.
                    format: int64
                    type: integer
                  policyName:
                    description: PolicyName is the name of the autoscaling policy.
                    type: string
                  scaleInCooldown:
                    description: |-
                      ScaleInCooldown is the amount of time, in seconds, after a scaling in
                      activity completes before another scaling activity can start.
                    format: int64
                    type: integer
                  scaleOutCooldown:
                    description: |-
                      ScaleOutCooldown is the amount of time, in seconds, after a scaling out
                      activity completes before another scaling activity can start.
                    format: int64
                    type: integer
                  targetCPU:
                    description: TargetCPU is CPU threshold which will initiate autoscaling.
                    format: int64
                    type: integer
                  targetConnections:
                    description: |-
                      TargetConnections is the average number of connections threshold which
                      will initiate autoscaling. Default value is 70% of db.r4/r5/r6g.large's
                      default max_connections
                    format: int64
                    type: integer
                type: object
              availabilityZones:
                description: AvailabilityZones is a list of availability zone to use.
                items:
                  type: string
                type: array
              backtrackWindow:
                description: |-
                  BacktrackWindow is the target backtrack window, in seconds.
                  Only available for Aurora engine. To disable backtracking, set this value to 0.
                format: int64
                maximum: 259200
                minimum: 0
                type: integer
              backupRetentionPeriod:
                description: BackupRetentionPeriod is the number of days to retain
                  backups for.
                format: int64
                type: integer
              cidrBlocks:
                description: CidrBlocks is a list of CIDRs that are allowed to connect
                  to the DB.
                items:
                  type: string
                type: array
              cloudwatchLogGroupParameters:
                description: CloudwatchLogGroup defines the parameters for the log
                  groups
                properties:
                  class:
                    description: Class is the class of the log group.
                    type: string
                  create:
                    description: Create is whether the log group is to be created.
                    type: boolean
                  retentionInDays:
                    description: RetentionInDays is the number of days to retain logs
                      for.
                    format: int64
                    type: integer
                  skipDestroy:
                    description: SkipDestroy is whether the log group should be skipped
                      during destroy.
                    type: boolean
                type: object
              copyTagsToSnapshot:
                description: CopyTagsToSnapshot is whether tags should be copied to
                  snapshots.
                type: boolean
              dbClusterInstanceClass:
                description: DbClusterInstanceClass is the instance class to use.
                type: string
              dbClusterParameterGroup:
                description: DbClusterParameterGroup defines the parameters for the
                  DB cluster.
                properties:
                  applyMethod:
                    description: |-
                      ApplyMethod is the apply method for the parameter group. Some engines
                      cannot apply changes immediately, and require a reboot in which case you
                      must set this value to `pending-reboot`.
                    enum:
                    - immediate
                    - pending-reboot
                    type: string
                  create:
                    description: Create is whether the parameter group is to be created.
                    type: boolean
                  description:
                    description: Description is the description of the parameter group.
                    type: string
                  family:
                    description: Family is the family of the parameter group.
                    type: string
                  name:
                    description: Name is the name of the parameter group.
                    type: string
                  parameters:
                    description: |-
                      Parameters is a list of parameters to associate with the parameter group.
                      Note that parameters may differ between families
                    items:
                      description: Parameter is a parameter to associate with a parameter
                        group.
                      pattern: ^[a-zA-Z0-9_]*$
                      type: string
                    type: array
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags is a set of tags to associate with the parameter
                      group.
                    maxProperties: 50
                    type: object
                type: object
              dbParameterGroup:
                description: DbParameterGroup defines the parameters for the DB instance.
                properties:
                  create:
                    description: Create is whether the parameter group is created.
                    type: boolean
                  description:
                    description: Description is the description of the parameter group.
                    type: string
                  family:
                    description: Family is the family of the parameter group.
                    type: string
                  name:
                    description: Name is the name of the parameter group.
                    type: string
                  parameters:
                    description: |-
                      Parameters is a list of parameters to associate with the parameter group.
                      Note that parameters may differ between families
                    items:
                      description: Parameter is a parameter to associate with a parameter
                        group.
                      pattern: ^[a-zA-Z0-9_]*$
                      type: string
                    type: array
                  tags:
                    additionalProperties:
                      type: string
                    description: Tags is a set of tags to associate with the parameter
                      group.
                    maxProperties: 50
                    type: object
                type: object
              dbSubnetGroupName:
                description: DbSubnetGroupName is the name of the DB subnet group
                  to associate with this DB cluster.
                type: string
              deleteAutomatedBackups:
                description: DeleteAutomatedBackups is whether automated backups should
                  be deleted.
                type: boolean
              deletionPolicy:
                default: Delete
                description: |-
                  DeletionPolicy specifies what will happen to the underlying external
                  when this managed resource is deleted - either "Delete" or "Orphan" the
                  external resource.
                  This field is planned to be deprecated in favor of the ManagementPolicies
                  field in a future release. Currently, both could be set independently and
                  non-default values would be honored if the feature flag is enabled.
                  See the design doc for more information: https://github.com/crossplane/crossplane/blob/499895a25d1a1a0ba1604944ef98ac7a1a71f197/design/design-doc-observe-only-resources.md?plain=1#L223
                enum:
                - Orphan
                - Delete
                type: string
              deletionProtection:
                description: DeletionProtection is whether deletion protection is
                  enabled.
                type: boolean
              domain:
                description: Domain is the domain to use.
                type: string
              domainIAMRoleName:
                description: DomainIAMRoleName is the name of the IAM role to use.
                type: string
              enableGlobalWriteForwarding:
                description: EnableGlobalWriteForwarding is whether global write forwarding
                  is enabled.
                type: boolean
              enableHttpEndpoint:
                description: EnableHttpEndpoint is whether the HTTP endpoint is enabled.
                type: boolean
              enableLocalWriteForwarding:
                description: EnableLocalWriteForwarding is whether local write forwarding
                  is enabled.
                type: boolean
              enabledCloudwatchLogsExports:
                description: EnabledCloudwatchLogsExports is the list of log types
                  to export to CloudWatch Logs.
                items:
                  description: LogGroup is the name of a log group.
                  enum:
                  - audit
                  - error
                  - general
                  - slowquery
                  - postgresql
                  pattern: ^[a-zA-Z0-9_]*$
                  type: string
                type: array
              endpoints:
                description: Endpoints is a list of custom endpoints to create.
                items:
                  properties:
                    customEndpointType:
                      description: CustomEndpointType is the type of the custom endpoint.
                      enum:
                      - READER
                      - ANY
                      type: string
                    excludedMembers:
                      description: |-
                        ExcludedMembers is a list of DB instances that aren't part of the custom
                        endpoint group.
                      items:
                        type: string
                      type: array
                    staticMembers:
                      description: |-
                        StaticMembers is a list of DB instances that are part of the custom
                        endpoint group.
                      items:
                        type: string
                      type: array
                    tags:
                      additionalProperties:
                        type: string
                      description: Tags is a set of tags to associate with the custom
                        endpoint.
                      maxProperties: 50
                      type: object
                  type: object
                type: array
              engine:
                description: Engine is the database engine to use.
                type: string
              engineMode:
                description: EngineMode is the database engine mode to use.
                enum:
                - parallelquery
                - provisioned
                - serverless
                type: string
              enhancedMonitoring:
                description: EnhancedMonitoring is the enhanced monitoring configuration.
                properties:
                  description:
                    description: Description is the description of the monitoring
                      role.
                    type: string
                  enabled:
                    description: Enabled is whether enhanced monitoring is enabled.
                    type: boolean
                  forceDetachPolicies:
                    description: ForceDetachPolicies Whether to force detaching any
                      policies the monitoring role has before destroying it
                    type: boolean
                  managedPolicyArns:
                    description: ManagedPolicyArns is a list of ARNs for managed policies
                      to attach to the monitoring role.
                    items:
                      type: string
                    type: array
                  maxSessionDuration:
                    description: MaxSessionDuration is the maximum session duration
                      (in seconds) that you want to set for the monitoring role.
                    format: int64
                    type: integer
                  monitoringInterval:
                    description: MonitoringInterval is the interval, in seconds, between
                      points when Enhanced Monitoring metrics are collected for the
                      DB instance.
                    format: int64
                    type: integer
                  path:
                    description: Path is the path of the monitoring role.
                    type: string
                  permissionsBoundary:
                    description: PermissionsBoundary is the ARN of the policy that
                      is used to set the permissions boundary for the monitoring role.
                    type: string
                type: object
              globalClusterIdentifier:
                description: GlobalClusterIdentifier is the global cluster identifier
                  for an Aurora global database.
                type: string
              iamDatabaseAuthenticationEnabled:
                description: IAMDatabaseAuthenticationEnabled is whether IAM database
                  authentication is enabled.
                type: boolean
              iamRoles:
                description: IamRoles is a list of IAM roles to associate with the
                  DB cluster.
                items:
                  properties:
                    featureName:
                      description: FeatureName is the name of the feature.
                      type: string
                    roleArn:
                      description: RoleArn is the ARN of the role.
                      type: string
                  type: object
                type: array
              instanceClass:
                description: InstanceClass is the instance class to use.
                type: string
              instances:
                description: Instances is a list of instances to create.
                items:
                  properties:
                    applyImmediately:
                      description: ApplyImmediately is whether changes should be applied
                        immediately.
                      nullable: true
                      type: boolean
                    autoMinorVersionUpgrade:
                      description: |-
                        AutoMinorVersionUpgrade is whether minor version upgrades are applied
                        automatically.
                      nullable: true
                      type: boolean
                    availabilityZone:
                      description: AvailabilityZone is the availability zone to use.
                      nullable: true
                      type: string
                    copyTagsToSnapshot:
                      description: CopyTagsToSnapshot is whether tags should be copied
                        to snapshots.
                      nullable: true
                      type: boolean
                    instanceClass:
                      description: InstanceClass is the instance class to use.
                      nullable: true
                      type: string
                    monitoringInterval:
                      description: |-
                        MonitoringInterval is the interval, in seconds, between points when
                        Enhanced Monitoring metrics are collected for the DB instance.
                      format: int64
                      nullable: true
                      type: integer
                    multiAZ:
                      description: MultiAZ is whether the DB instance is a Multi-AZ
                        deployment.
                      nullable: true
                      type: boolean
                    parameterGroupName:
                      description: |-
                        ParameterGroupName is the name of the DB parameter group to associate
                        with this DB instance. Must pre-exist in the account. Mutually exclusive
                        with `MultiAzDbCluster.dbParameterGroup`
                      nullable: true
                      type: string
                    performanceInsightsEnabled:
                      description: PerformanceInsightsEnabled is whether Performance
                        Insights is enabled.
                      nullable: true
                      type: boolean
                    performanceInsightsKMSKeyID:
                      description: |-
                        PerformanceInsightsKMSKeyID is the AWS KMS key identifier for encryption
                        of Performance Insights data.
                      nullable: true
                      type: string
                    performanceInsightsRetentionPeriod:
                      description: |-
                        PerformanceInsightsRetentionPeriod is the amount of time, in days, to
                        retain Performance Insights data.
                      format: int64
                      nullable: true
                      type: integer
                    preferredMaintenanceWindow:
                      description: PreferredMaintenanceWindow is the preferred maintenance
                        window.
                      nullable: true
                      type: string
                    promotionTier:
                      description: |-
                        PromotionTier is the order in which to promote an Aurora replica to the
                        primary instance.
                      format: int64
                      nullable: true
                      type: integer
                    publiclyAccessible:
                      description: PubliclyAccessible is whether the DB instance is
                        publicly accessible.
                      nullable: true
                      type: boolean
                    tags:
                      additionalProperties:
                        type: string
                      description: Tags is a set of tags to associate with the DB
                        instance.
                      maxProperties: 50
                      nullable: true
                      type: object
                  type: object
                minItems: 1
                type: array
              iops:
                description: Iops is the amount of provisioned IOPS.
                format: int64
                type: integer
              managementPolicies:
                default:
                - '*'
                description: |-
                  THIS IS A BETA FIELD. It is on by default but can be opted out
                  through a Crossplane feature flag.
                  ManagementPolicies specify the array of actions Crossplane is allowed to
                  take on the managed and external resources.
                  This field is planned to replace the DeletionPolicy field in a future
                  release. Currently, both could be set independently and non-default
                  values would be honored if the feature flag is enabled. If both are
                  custom, the DeletionPolicy field will be ignored.
                  See the design doc for more information: https://github.com/crossplane/crossplane/blob/499895a25d1a1a0ba1604944ef98ac7a1a71f197/design/design-doc-observe-only-resources.md?plain=1#L223
                  and this one: https://github.com/crossplane/crossplane/blob/444267e84783136daa93568b364a5f01228cacbe/design/one-pager-ignore-changes.md
                items:
                  description: |-
                    A ManagementAction represents an action that the Crossplane controllers
                    can take on an external resource.
                  enum:
                  - Observe
                  - Create
                  - Update
                  - Delete
                  - LateInitialize
                  - '*'
                  type: string
                type: array
              masterUsername:
                description: MasterUsername is the master username to use.
                type: string
              multiAZ:
                description: MultiAZ is whether the DB instance is a Multi-AZ deployment.
                type: boolean
              performanceInsightsEnabled:
                description: PerformanceInsightsEnabled is whether Performance Insights
                  is enabled.
                type: boolean
              performanceInsightsKMSKeyID:
                description: PerformanceInsightsKMSKeyID is the AWS KMS key identifier
                  for encryption of Performance Insights data.
                type: string
              performanceInsightsRetentionPeriod:
                description: PerformanceInsightsRetentionPeriod is the amount of time,
                  in days, to retain Performance Insights data.
                format: int64
                type: integer
              preferredBackupWindow:
                description: PreferredBackupWindow is the preferred backup window.
                type: string
              preferredMaintenanceWindow:
                description: PreferredMaintenanceWindow is the preferred maintenance
                  window.
                type: string
              providerConfigRef:
                default:
                  name: default
                description: |-
                  ProviderConfigReference specifies how the provider that will be used to
                  create, observe, update, and delete this managed resource should be
                  configured.
                properties:
                  name:
                    description: Name of the referenced object.
                    type: string
                  policy:
                    description: Policies for referencing.
                    properties:
                      resolution:
                        default: Required
                        description: |-
                          Resolution specifies whether resolution of this reference is required.
                          The default is 'Required', which means the reconcile will fail if the
                          reference cannot be resolved. 'Optional' means this reference will be
                          a no-op if it cannot be resolved.
                        enum:
                        - Required
                        - Optional
                        type: string
                      resolve:
                        description: |-
                          Resolve specifies when this reference should be resolved. The default
                          is 'IfNotPresent', which will attempt to resolve the reference only when
                          the corresponding field is not present. Use 'Always' to resolve the
                          reference on every reconcile.
                        enum:
                        - Always
                        - IfNotPresent
                        type: string
                    type: object
                required:
                - name
                type: object
              publiclyAccessible:
                description: PubliclyAccessible is whether the DB instance is publicly
                  accessible.
                type: boolean
              publishConnectionDetailsTo:
                description: |-
                  PublishConnectionDetailsTo specifies the connection secret config which
                  contains a name, metadata and a reference to secret store config to
                  which any connection details for this managed resource should be written.
                  Connection details frequently include the endpoint, username,
                  and password required to connect to the managed resource.
                properties:
                  configRef:
                    default:
                      name: default
                    description: |-
                      SecretStoreConfigRef specifies which secret store config should be used
                      for this ConnectionSecret.
                    properties:
                      name:
                        description: Name of the referenced object.
                        type: string
                      policy:
                        description: Policies for referencing.
                        properties:
                          resolution:
                            default: Required
                            description: |-
                              Resolution specifies whether resolution of this reference is required.
                              The default is 'Required', which means the reconcile will fail if the
                              reference cannot be resolved. 'Optional' means this reference will be
                              a no-op if it cannot be resolved.
                            enum:
                            - Required
                            - Optional
                            type: string
                          resolve:
                            description: |-
                              Resolve specifies when this reference should be resolved. The default
                              is 'IfNotPresent', which will attempt to resolve the reference only when
                              the corresponding field is not present. Use 'Always' to resolve the
                              reference on every reconcile.
                            enum:
                            - Always
                            - IfNotPresent
                            type: string
                        type: object
                    required:
                    - name
                    type: object
                  metadata:
                    description: Metadata is the metadata for connection secret.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: |-
                          Annotations are the annotations to be added to connection secret.
                          - For Kubernetes secrets, this will be used as "metadata.annotations".
                          - It is up to Secret Store implementation for others store types.
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: |-
                          Labels are the labels/tags to be added to connection secret.
                          - For Kubernetes secrets, this will be used as "metadata.labels".
                          - It is up to Secret Store implementation for others store types.
                        type: object
                      type:
                        description: |-
                          Type is the SecretType for the connection secret.
                          - Only valid for Kubernetes Secret Stores.
                        type: string
                    type: object
                  name:
                    description: Name is the name of the connection secret.
                    type: string
                required:
                - name
                type: object
              region:
                description: Region is the region to use.
                type: string
              replicationSourceIdentifier:
                description: |-
                  ReplicationSourceIdentifier ARN of a source DB cluster or DB instance if
                  this DB cluster is to be created as a Read Replica
                type: string
              secretRotation:
                description: SecretRotation is the secret rotation configuration.
                properties:
                  automaticallyAfterDays:
                    description: |-
                      AutomaticallyAfterDays is the number of days after which the secret is
                      rotated automatically.
                    format: int64
                    type: integer
                  enabled:
                    description: Enabled is whether secret rotation is enabled.
                    type: boolean
                  rotateImmediately:
                    description: RotateImmediately is whether the secret should be
                      rotated immediately.
                    type: boolean
                  scheduleExpression:
                    description: ScheduleExpression is the schedule expression for
                      secret rotation.
                    type: string
                type: object
              storageType:
                description: StorageType specifies the storage type to be associated
                  with the cluster
                type: string
              version:
                description: EngineVersion is the version of the database engine to
                  use.
                type: string
              writeConnectionSecretToRef:
                description: |-
                  WriteConnectionSecretToReference specifies the namespace and name of a
                  Secret to which any connection details for this managed resource should
                  be written. Connection details frequently include the endpoint, username,
                  and password required to connect to the managed resource.
                  This field is planned to be replaced in a future release in favor of
                  PublishConnectionDetailsTo. Currently, both could be set independently
                  and connection details would be published to both without affecting
                  each other.
                properties:
                  name:
                    description: Name of the secret.
                    type: string
                  namespace:
                    description: Namespace of the secret.
                    type: string
                required:
                - name
                - namespace
                type: object
            required:
            - cidrBlocks
            - dbClusterParameterGroup
            type: object
          status:
            description: Defines the status of a RDS cluster
            properties:
              accountId:
                description: AccountId is the account ID of the DB cluster.
                type: string
              clusterArn:
                description: ClusterArn is the ARN of the DB cluster.
                type: string
              clusterIdentifier:
                description: ClusterIdentifier is the identifier of the DB cluster.
                type: string
              conditions:
                description: Conditions of the resource.
                items:
                  description: A Condition that may apply to a resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        LastTransitionTime is the last time this condition transitioned from one
                        status to another.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        A Message containing details about this condition's last transition from
                        one status to another, if any.
                      type: string
                    reason:
                      description: A Reason for this condition's last transition from
                        one status to another.
                      type: string
                    status:
                      description: Status of this condition; is it currently True,
                        False, or Unknown?
                      type: string
                    type:
                      description: |-
                        Type of this condition. At most one of each condition type may apply to
                        a resource at any point in time.
                      type: string
                  required:
                  - lastTransitionTime
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              dbParameterGroupName:
                description: |-
                  DbParameterGroupName is the name of the DB parameter group to associate
                  with this DB instance.
                type: string
              dbSubnetGroupName:
                description: |-
                  DbSubnetGroupName is the name of the DB subnet group to associate with
                  this DB instance.
                type: string
              endpoint:
                description: Endpoint is the endpoint of the DB cluster.
                type: string
              kmsKeyID:
                description: KmsKeyID is the ID of the KMS key.
                type: string
              monitoringRoleArn:
                description: MonitoringRoleArn is the ARN of the monitoring role.
                type: string
              port:
                description: port is the port of the database.
                format: int64
                type: integer
              securityGroupIds:
                description: SecurityGroupIds A list of VPC security group IDs for
                  the cluster
                items:
                  type: string
                type: array
                x-kubernetes-list-type: set
            type: object
        required:
        - spec
        type: object
    served: true
