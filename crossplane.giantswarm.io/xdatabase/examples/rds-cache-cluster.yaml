---
apiVersion: xdatabase.crossplane.giantswarm.io/v1alpha1
kind: RdsCacheClusterClaim
metadata:
  name: example-rds-elasticache
  namespace: default
  labels:
    owner: honeybadger
    provider: aws
    app.kubernetes.io/name: myapp
    app.kubernetes.io/instance: myapp-elasticache-database
    app.kubernetes.io/part-of: myapp
    app.kubernetes.io/managed-by: crossplane
spec:
  compositionSelector:
    matchLabels:
      provider: aws
      component: database
      type: rds-cluster

  database:
    availabilityZones: ["a", "b", "c"]
    allocatedStorage: 20
    createCluster: false
    enabledCloudwatchLogsExports: ["postgresql"]
    cloudwatchLogGroupParameters:
      retentionInDays: 7
      class: standard
      create: false
    engine: postgres
    engineVersion: "14.5"
    dbClusterInstanceClass: db.t3.medium
    iops: 1000
    instances:
      - {} # master instance - if multiAz will create a hot standaby replica
    masterUsername: admin
    multiAz: true
    secretRotation:
      enabled: false
    storageType: io1

  deletionPolicy: Delete
  providerConfigRef:
    name: default
  region: eu-central-1

  vpc:
    peering:
      remoteVpcs:
      - name: basic-no-peering
        allowPublic: true
      enabled: true
    subnetsets:
      cidrs:
      - prefix: '10.16.0.0/24'
        public:
          mask: ""
          count: 0
          lbSetIndex: -1
        private:
          mask: /28
          count: 2
          lbSetIndex: -1
      availabilityZones:
      - a
      - b
      - c
